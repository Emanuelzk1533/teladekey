-- SISTEMA DE KEY - XURRAS SCRIPT
-- Tela de verifica√ß√£o de key com design moderno

local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer

-- Configura√ß√µes
local API_URL = "http://localhost:8080"  -- Altere para seu servidor
local DISCORD_INVITE = "https://discord.gg/aG8r83nJFW"

-- Fun√ß√£o para gerar HWID √∫nico
local function generateHWID()
    local hwid_data = {
        game:GetService("RbxAnalyticsService"):GetClientId(),
        game.JobId,
        player.UserId,
        tostring(os.time())
    }
    
    return table.concat(hwid_data, "-")
end

-- Fun√ß√£o para copiar texto
local function setClipboard(text)
    if setclipboard then
        setclipboard(text)
        return true
    elseif syn and syn.write_clipboard then
        syn.write_clipboard(text)
        return true
    end
    return false
end

-- Fun√ß√£o para obter executor
local function getExecutor()
    if identifyexecutor then
        return identifyexecutor()
    elseif syn then
        return "Synapse X"
    end
    return "Unknown"
end

-- Criar ScreenGui
local KeyGui = Instance.new("ScreenGui")
KeyGui.Name = "XurrasKeySystem"
KeyGui.Parent = game.CoreGui
KeyGui.ResetOnSpawn = false
KeyGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Background blur
local BlurFrame = Instance.new("Frame")
BlurFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 15)
BlurFrame.BackgroundTransparency = 0.1
BlurFrame.BorderSizePixel = 0
BlurFrame.Size = UDim2.new(1, 0, 1, 0)
BlurFrame.Parent = KeyGui

-- Container principal
local MainContainer = Instance.new("Frame")
MainContainer.BackgroundColor3 = Color3.fromRGB(20, 25, 35)
MainContainer.BorderSizePixel = 0
MainContainer.Position = UDim2.new(0.5, -220, 0.5, -180)
MainContainer.Size = UDim2.new(0, 440, 0, 360)
MainContainer.Parent = KeyGui

local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 20)
MainCorner.Parent = MainContainer

-- Header
local Header = Instance.new("Frame")
Header.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
Header.BorderSizePixel = 0
Header.Size = UDim2.new(1, 0, 0, 80)
Header.Parent = MainContainer

local HeaderCorner = Instance.new("UICorner")
HeaderCorner.CornerRadius = UDim.new(0, 20)
HeaderCorner.Parent = Header

local HeaderCover = Instance.new("Frame")
HeaderCover.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
HeaderCover.BorderSizePixel = 0
HeaderCover.Position = UDim2.new(0, 0, 1, -20)
HeaderCover.Size = UDim2.new(1, 0, 0, 20)
HeaderCover.Parent = Header

-- Logo
local LogoIcon = Instance.new("ImageLabel")
LogoIcon.BackgroundTransparency = 1
LogoIcon.Position = UDim2.new(0, 20, 0, 15)
LogoIcon.Size = UDim2.new(0, 50, 0, 50)
LogoIcon.Image = "rbxassetid://14874672027"
LogoIcon.Parent = Header

-- T√≠tulo
local Title = Instance.new("TextLabel")
Title.BackgroundTransparency = 1
Title.Position = UDim2.new(0, 80, 0, 10)
Title.Size = UDim2.new(1, -100, 0, 30)
Title.Font = Enum.Font.GothamBold
Title.Text = "XURRAS SCRIPT"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 26
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = Header

-- Subt√≠tulo
local Subtitle = Instance.new("TextLabel")
Subtitle.BackgroundTransparency = 1
Subtitle.Position = UDim2.new(0, 80, 0, 42)
Subtitle.Size = UDim2.new(1, -100, 0, 20)
Subtitle.Font = Enum.Font.Gotham
Subtitle.Text = "Sistema de Verifica√ß√£o"
Subtitle.TextColor3 = Color3.fromRGB(200, 200, 220)
Subtitle.TextSize = 14
Subtitle.TextXAlignment = Enum.TextXAlignment.Left
Subtitle.Parent = Header

-- Content
local ContentFrame = Instance.new("Frame")
ContentFrame.BackgroundTransparency = 1
ContentFrame.Position = UDim2.new(0, 0, 0, 80)
ContentFrame.Size = UDim2.new(1, 0, 1, -80)
ContentFrame.Parent = MainContainer

-- Instru√ß√£o
local InstructionLabel = Instance.new("TextLabel")
InstructionLabel.BackgroundTransparency = 1
InstructionLabel.Position = UDim2.new(0, 30, 0, 20)
InstructionLabel.Size = UDim2.new(1, -60, 0, 40)
InstructionLabel.Font = Enum.Font.Gotham
InstructionLabel.Text = "üîë Insira sua key para continuar"
InstructionLabel.TextColor3 = Color3.fromRGB(180, 180, 200)
InstructionLabel.TextSize = 15
InstructionLabel.TextWrapped = true
InstructionLabel.Parent = ContentFrame

-- Input Frame
local KeyInputFrame = Instance.new("Frame")
KeyInputFrame.BackgroundColor3 = Color3.fromRGB(30, 35, 50)
KeyInputFrame.BorderSizePixel = 0
KeyInputFrame.Position = UDim2.new(0, 30, 0, 70)
KeyInputFrame.Size = UDim2.new(1, -60, 0, 50)
KeyInputFrame.Parent = ContentFrame

local KeyInputCorner = Instance.new("UICorner")
KeyInputCorner.CornerRadius = UDim.new(0, 12)
KeyInputCorner.Parent = KeyInputFrame

local KeyInput = Instance.new("TextBox")
KeyInput.BackgroundTransparency = 1
KeyInput.Position = UDim2.new(0, 15, 0, 0)
KeyInput.Size = UDim2.new(1, -95, 1, 0)
KeyInput.Font = Enum.Font.GothamMedium
KeyInput.PlaceholderText = "XURRAS-XXXX-XXXX-XXXX-XXXX"
KeyInput.PlaceholderColor3 = Color3.fromRGB(100, 100, 120)
KeyInput.Text = ""
KeyInput.TextColor3 = Color3.fromRGB(255, 255, 255)
KeyInput.TextSize = 16
KeyInput.TextXAlignment = Enum.TextXAlignment.Left
KeyInput.ClearTextOnFocus = false
KeyInput.Parent = KeyInputFrame

-- Bot√£o Colar
local PasteButton = Instance.new("TextButton")
PasteButton.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
PasteButton.BorderSizePixel = 0
PasteButton.Position = UDim2.new(1, -70, 0.5, -15)
PasteButton.Size = UDim2.new(0, 60, 0, 30)
PasteButton.Font = Enum.Font.GothamBold
PasteButton.Text = "üìã Colar"
PasteButton.TextColor3 = Color3.fromRGB(255, 255, 255)
PasteButton.TextSize = 12
PasteButton.Parent = KeyInputFrame

local PasteCorner = Instance.new("UICorner")
PasteCorner.CornerRadius = UDim.new(0, 8)
PasteCorner.Parent = PasteButton

-- Get Key Button
local GetKeyButton = Instance.new("TextButton")
GetKeyButton.BackgroundColor3 = Color3.fromRGB(139, 92, 246)
GetKeyButton.BorderSizePixel = 0
GetKeyButton.Position = UDim2.new(0, 30, 0, 140)
GetKeyButton.Size = UDim2.new(0.5, -40, 0, 50)
GetKeyButton.Font = Enum.Font.GothamBold
GetKeyButton.Text = "üîó Pegar Key"
GetKeyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
GetKeyButton.TextSize = 16
GetKeyButton.Parent = ContentFrame

local GetKeyCorner = Instance.new("UICorner")
GetKeyCorner.CornerRadius = UDim.new(0, 12)
GetKeyCorner.Parent = GetKeyButton

-- Confirm Button
local ConfirmButton = Instance.new("TextButton")
ConfirmButton.BackgroundColor3 = Color3.fromRGB(72, 187, 120)
ConfirmButton.BorderSizePixel = 0
ConfirmButton.Position = UDim2.new(0.5, 10, 0, 140)
ConfirmButton.Size = UDim2.new(0.5, -40, 0, 50)
ConfirmButton.Font = Enum.Font.GothamBold
ConfirmButton.Text = "‚úÖ Confirmar"
ConfirmButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ConfirmButton.TextSize = 16
ConfirmButton.Parent = ContentFrame

local ConfirmCorner = Instance.new("UICorner")
ConfirmCorner.CornerRadius = UDim.new(0, 12)
ConfirmCorner.Parent = ConfirmButton

-- Status Label
local StatusLabel = Instance.new("TextLabel")
StatusLabel.BackgroundTransparency = 1
StatusLabel.Position = UDim2.new(0, 30, 0, 210)
StatusLabel.Size = UDim2.new(1, -60, 0, 40)
StatusLabel.Font = Enum.Font.GothamMedium
StatusLabel.Text = ""
StatusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
StatusLabel.TextSize = 14
StatusLabel.TextWrapped = true
StatusLabel.Parent = ContentFrame

-- Fun√ß√µes
local function showStatus(message, isError)
    StatusLabel.Text = message
    StatusLabel.TextColor3 = isError and Color3.fromRGB(255, 100, 100) or Color3.fromRGB(100, 255, 150)
end

-- Get Key
GetKeyButton.MouseButton1Click:Connect(function()
    if setClipboard(DISCORD_INVITE) then
        showStatus("‚úÖ Link copiado! Cole no navegador/Discord", false)
    else
        showStatus("üîó Entre no Discord: " .. DISCORD_INVITE, false)
    end
end)

-- Paste
PasteButton.MouseButton1Click:Connect(function()
    pcall(function()
        if getclipboard then
            KeyInput.Text = getclipboard()
            showStatus("‚úÖ Key colada!", false)
        end
    end)
end)

-- Confirm
ConfirmButton.MouseButton1Click:Connect(function()
    local key = KeyInput.Text:gsub("%s+", "")
    
    if key == "" then
        showStatus("‚ùå Insira uma key!", true)
        return
    end
    
    ConfirmButton.Text = "‚è≥ Verificando..."
    
    local success, response = pcall(function()
        return HttpService:RequestAsync({
            Url = API_URL .. "/api/validate-key",
            Method = "POST",
            Headers = {["Content-Type"] = "application/json"},
            Body = HttpService:JSONEncode({
                key = key,
                username = player.Name,
                user_id = tostring(player.UserId),
                avatar_url = "https://www.roblox.com/headshot-thumbnail/image?userId="..player.UserId.."&width=150&height=150&format=png",
                device_id = game:GetService("RbxAnalyticsService"):GetClientId(),
                executor = getExecutor(),
                hwid = generateHWID()
            })
        })
    end)
    
    if success and response.StatusCode == 200 then
        local data = HttpService:JSONDecode(response.Body)
        if data.success then
            showStatus("‚úÖ " .. data.message, false)
            if writefile then
                writefile("xurras_key.txt", key)
            end
            wait(1)
            KeyGui:Destroy()
            loadstring(game:HttpGet("SEU_LINK_DO_LOADER"))()
        else
            showStatus("‚ùå " .. data.message, true)
            ConfirmButton.Text = "‚úÖ Confirmar"
        end
    else
        showStatus("‚ùå Erro ao conectar!", true)
        ConfirmButton.Text = "‚úÖ Confirmar"
    end
end)
